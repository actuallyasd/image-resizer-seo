<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SEO + Analytics Report – bestimageresizer.com</title>

  <style>
    :root{
      --bg:#121212; --panel:#1c1c1e; --panel-2:#222225;
      --ink:#f5f5f7; --ink-2:#cfcfd3; --muted:#9c9ca3;
      --blue:#0a84ff; --green:#30d158; --amber:#ffd60a; --red:#ff453a; --purple:#7a7aff;
      --grid:#2c2c2e; --shadow:0 8px 28px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:20px; font-family:-apple-system,BlinkMacSystemFont,"San Francisco",Arial,sans-serif;
      background:var(--bg); color:var(--ink);
    }
    body::after{
      content:""; position:fixed; inset:0; pointer-events:none;
      background-image:radial-gradient(rgba(255,255,255,.025) 1px, transparent 1px);
      background-size:3px 3px;
    }
    h1{ text-align:center; margin:0 0 28px; letter-spacing:.2px; }

    /* Tabs */
    .tabs{ display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-bottom:20px; }
    .tab{
      padding:10px 18px; border-radius:12px; background:#1e1e1e; color:var(--ink);
      cursor:pointer; transition:.25s; user-select:none;
    }
    .tab:hover{ transform:translateY(-1px); }
    .tab.active{ background:var(--blue); color:#fff; box-shadow:0 6px 18px rgba(10,132,255,.35); }

    /* Sections */
    .content{ display:none; background:var(--panel); border-radius:16px; padding:24px; box-shadow:var(--shadow); animation:fade .35s ease; }
    .content.active{ display:block; }
    @keyframes fade{ from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)} }

    /* Subtabs */
    .subtabs{ display:flex; gap:8px; margin:10px 0 14px; flex-wrap:wrap; }
    .subtab{
      padding:6px 12px; border-radius:9px; background:#2c2c2e; color:var(--ink);
      cursor:pointer; transition:.2s;
    }
    .subtab.active{ background:var(--green); color:#fff; box-shadow:0 6px 14px rgba(48,209,88,.35); }
    .subcontent{ display:none; }
    .subcontent.active{ display:block; }

    /* Iframes (GSheets / Docs / PDFs) */
    iframe{ width:100%; height:520px; border:none; border-radius:12px; background:#2c2c2e; margin:12px 0 22px; box-shadow:var(--shadow); }
    iframe.doc-iframe{ height:80vh !important; background:transparent; box-shadow:none; border-radius:12px; }

    /* cards / tiles */
    .tile-grid{ display:grid; gap:14px; grid-template-columns:repeat(2, minmax(220px, 1fr)); }
    @media (min-width:980px){ .tile-grid{ grid-template-columns:repeat(4, minmax(220px, 1fr)); } }
    .tile{
      background:var(--panel-2); border-radius:14px; padding:14px 16px; box-shadow:var(--shadow);
      display:flex; flex-direction:column; gap:6px; min-height:96px;
    }
    .tile .label{ color:var(--ink-2); font-size:13px; }
    .tile .value{ font-size:24px; font-weight:800; letter-spacing:.3px; }
    .tile .sub{ color:var(--muted); font-size:12px; }

    .chart-box{ background:var(--panel-2); border-radius:12px; padding:14px; box-shadow:var(--shadow); height:300px; display:flex; align-items:center; }
    .chart-box canvas{ width:100% !important; height:100% !important; }

    .impact-wrap{ background:var(--panel-2); padding:14px; border-radius:14px; }
    #seoChart{ width:100%; height:320px !important; }
    .gridish{ background:var(--grid); border-radius:12px; }

    .richtext { color: var(--ink-2); line-height:1.6; }
    .richtext h3{ color: var(--ink); margin: 18px 0 8px; }
    .richtext p{ margin: 0 0 14px; }
    .richtext a { color: var(--blue); text-decoration:none; }
    .richtext a:hover { text-decoration:underline; }

    /* little badges */
    .badge{font-size:12px;color:#fff;background:#2c2c2e;padding:4px 8px;border-radius:8px}
  </style>

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>

<body>
  <h1>SEO + Analytics Report – bestimageresizer.com</h1>

  <!-- Top tabs -->
  <div class="tabs">
    <div class="tab active" data-tab="keywords">Keyword Research</div>
    <div class="tab" data-tab="competitors">Competitor Analysis</div>
    <div class="tab" data-tab="impact">Impact Analysis</div>
    <div class="tab" data-tab="technical">Technical SEO</div>
    <div class="tab" data-tab="analytics">Analytics</div>
    <div class="tab" data-tab="nextsteps">Next Steps</div>
  </div>

  <!-- ===== Technical ===== -->
  <div id="technical" class="content">
    <h2>Technical SEO</h2>
    <ul id="technical-list"></ul>
  </div>

  <!-- ===== Keyword Research ===== -->
  <div id="keywords" class="content active">
    <h2>Keyword Research</h2>

    <div class="subtabs">
      <div class="subtab active" data-sub="transactional">Transactional</div>
      <div class="subtab" data-sub="informational">Informational</div>
      <div class="subtab" data-sub="navigational">Navigational</div>
      <div class="subtab" data-sub="commercial">Commercial</div>
    </div>

    <div id="transactional" class="subcontent active">
      <h3>Core function</h3>
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRmxxbbDjBgvoT3eaUlmK0od3fD1OCQvWETUnB4BReUZr_joyRd1hH4AR0NipwTO8buReLKIgnVDh50/pubhtml?gid=1764063307&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
      <h3>User intent</h3>
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRmxxbbDjBgvoT3eaUlmK0od3fD1OCQvWETUnB4BReUZr_joyRd1hH4AR0NipwTO8buReLKIgnVDh50/pubhtml?gid=1096589268&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
      <h3>Platform specific</h3>
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRmxxbbDjBgvoT3eaUlmK0od3fD1OCQvWETUnB4BReUZr_joyRd1hH4AR0NipwTO8buReLKIgnVDh50/pubhtml?gid=1070525027&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
    </div>

    <div id="informational" class="subcontent">
      <h3>Prepositions</h3>
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSqeNceKSuzCMCNskX1XSyTA-GFN3Xcx8ye2GqGZLMF00duVSdJcLyCccxq-fQwxyHIS9NJMN9z3inD/pubhtml?gid=689662762&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
      <h3>Questions V1</h3>
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSqeNceKSuzCMCNskX1XSyTA-GFN3Xcx8ye2GqGZLMF00duVSdJcLyCccxq-fQwxyHIS9NJMN9z3inD/pubhtml?gid=1707919888&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
      <h3>Questions V2</h3>
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSqeNceKSuzCMCNskX1XSyTA-GFN3Xcx8ye2GqGZLMF00duVSdJcLyCccxq-fQwxyHIS9NJMN9z3inD/pubhtml?gid=985068758&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
    </div>

    <div id="navigational" class="subcontent">
      <h3>Navigational big brands</h3>
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSYVLKWv9BOHHqE-Lj4izr5ne3lzL58ZT8DFZl5P7ap4HeHmCFxkuZ2H4mfTkHOmrzCyWXg0aj8TU1d/pubhtml?gid=313868502&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
      <h3>Navigational medium competition</h3>
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSYVLKWv9BOHHqE-Lj4izr5ne3lzL58ZT8DFZl5P7ap4HeHmCFxkuZ2H4mfTkHOmrzCyWXg0aj8TU1d/pubhtml?gid=775491972&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
    </div>

    <div id="commercial" class="subcontent">
      <h3>Commercial Comparison</h3>
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRmWxvrBMzEzrBQKc6vCGwfEZvUdRm9JWVxex4xqzVt5kqI_vab5Egoqao3BgUsZNKWrvYyCRvtQKQE/pubhtml?widget=true&amp;headers=false"></iframe>
    </div>
  </div>

  <!-- ===== Impact Analysis ===== -->
  <div id="impact" class="content">
    <h2>SEO Impact Analysis</h2>
    <div class="impact-wrap gridish">
      <canvas id="seoChart"></canvas>
    </div>
  </div>

  <!-- ===== Competitor Analysis ===== -->
  <div id="competitors" class="content">
    <h2>Competitor Analysis</h2>

    <div class="subtabs">
      <div class="subtab active" data-sub="comp-stats">Competitor Stats</div>
      <div class="subtab" data-sub="comp-gap">Keyword Gap (Birme vs. Others)</div>
      <div class="subtab" data-sub="comp-insights">SEO Insights</div>
    </div>

    <div id="comp-stats" class="subcontent active">
      <!-- (cards omitted for brevity – same as before) -->
      <p class="badge">Cards unchanged – still rendering competitor mini-dashboards</p>
      <div class="chart-box"><canvas id="birme-traffic"></canvas></div>
      <div class="chart-box"><canvas id="brp-traffic"></canvas></div>
      <div class="chart-box"><canvas id="simple-traffic"></canvas></div>
    </div>

    <div id="comp-gap" class="subcontent">
      <h3>Keyword Gap: Birme vs. other competitors</h3>
      <div class="gridish" style="overflow:auto; border-radius:12px; padding:8px;">
        <table id="gap-table" style="width:100%; border-collapse:collapse; color:#eaeaea; font-size:14px;">
          <thead id="gap-thead"></thead>
          <tbody id="gap-tbody"></tbody>
        </table>
      </div>
    </div>

    <div id="comp-insights" class="subcontent">
      <iframe class="doc-iframe" src="https://docs.google.com/document/d/e/2PACX-1vQLEn_2HV2T3-O7Xidzca6kmNh-XdQbt1oiS-cNM1WmeIu1niWpZRUr7gLRVwa0MG7H7XwayI2X58n6/pub?embedded=true"></iframe>
    </div>
  </div>

  <!-- ===== Analytics (updated) ===== -->
  <div id="analytics" class="content">
    <h2>Analytics</h2>

    <div class="subtabs">
      <div class="subtab active" data-sub="analytics-overview">Overview</div>
      <div class="subtab" data-sub="analytics-campaigns">Campaigns</div>
      <div class="subtab" data-sub="analytics-retention">Retention</div>
      <div class="subtab" data-sub="analytics-attachments">Attachments</div>
      <div class="subtab" data-sub="analytics-insights">Analysis & Next steps</div>
    </div>

    <!-- Overview -->
    <div id="analytics-overview" class="subcontent active">
      <div class="tile-grid" id="analytics-tiles"></div>
      <div class="chart-box" style="margin-top:16px;"><canvas id="analytics-ratio-chart"></canvas></div>
    </div>

    <!-- Campaigns -->
    <div id="analytics-campaigns" class="subcontent">
      <div class="tile-grid" id="campaign-tiles"></div>
      <div class="chart-box" style="margin-top:16px;"><canvas id="campaign-compare-chart"></canvas></div>
    </div>

    <!-- Retention -->
    <div id="analytics-retention" class="subcontent">
      <div class="tile-grid" id="retention-tiles"></div>
      <div class="chart-box" style="margin-top:16px;"><canvas id="stickiness-chart"></canvas></div>
      <p class="richtext" style="margin-top:10px;">
        <span class="badge">Note</span> DAU/WAU/MAU and stickiness use totals for the selected period; supply numbers in the JSON block below.
      </p>
    </div>

    <!-- Attachments (all five PDFs) -->
    <div id="analytics-attachments" class="subcontent">
      <h3>Attached GA4 Reports</h3>
      <iframe class="doc-iframe" src="assets/Events_Event_name.pdf" title="Events: Event name"></iframe>
      <iframe class="doc-iframe" src="assets/User funnel.pdf" title="User funnel"></iframe>
      <iframe class="doc-iframe" src="assets/Event count and retention by campaign.pdf" title="Event count & retention by campaign"></iframe>
      <iframe class="doc-iframe" src="assets/user stickiness.pdf" title="User stickiness"></iframe>
      <iframe class="doc-iframe" src="assets/Overall retention.pdf" title="Overall retention"></iframe>
    </div>

    <!-- Insights placeholder -->
    <div id="analytics-insights" class="subcontent">
      <div class="richtext">
        <h3>Findings</h3>
        <p id="auto-findings">We’ll summarize campaign deltas, retention highlights, and drop-off points here.</p>
        <h3>Next steps</h3>
        <ul id="auto-nextsteps">
          <li>Prioritize the higher-retention campaign’s geo/creative in budget allocation.</li>
          <li>Test copy on the Wix CTA to lift click-through (CTA tile baseline shown in Overview).</li>
          <li>Reduce login friction; compare device-level login success in GA4.</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- ===== Next Steps (SEO) ===== -->
  <div id="nextsteps" class="content">
    <h2>Next Steps</h2>
    <div id="nextsteps-content">
      <ul style="list-style:disc; padding-left:1.25rem; color:var(--ink-2); line-height:1.6;">
        <li><strong style="color:var(--ink)">Blog:</strong> Keep a steady cadence focused on informational & commercial queries and interlink to the tool.</li>
        <li><strong style="color:var(--ink)">Dynamic CMS Pages:</strong> Launch platform & industry variants with FAQs + internal links.</li>
        <li><strong style="color:var(--ink)">Keyword Gap:</strong> Target competitors’ high-value gaps and defend Birme winners.</li>
        <li><strong style="color:var(--ink)">Core Web Vitals:</strong> Keep LCP/CLS/INP green via image/JS optimizations.</li>
      </ul>
    </div>
  </div>

  <script>
    /* ===== CSV paths (existing) ===== */
    const CSV = {
      brp:'assets/bulkresizephotos.com-organic.Positions-us-20250901-2025-09-03T04_55_04Z.csv',
      birme:'assets/birme.net-organic.Positions-us-20250901-2025-09-03T04_44_20Z.csv',
      simple:'assets/simpleimageresizer.com-organic.Positions-us-20250901-2025-09-03T04_55_43Z.csv',
      red:'assets/redketchup.io-organic.Positions-us-20250901-2025-09-03T04_56_01Z.csv',
      ilove:'assets/iloveimg.com-organic.Positions-us-20250901-2025-09-03T05_00_10Z.csv',
      canva:'assets/https___www.canva.com_features-organic.Positions-us-20250901-2025-09-03T05_00_30Z.csv',
      adobe:'assets/https___www.adobe.com_express_-organic.Positions-us-20250901-2025-09-03T05_01_15Z.csv'
    };

    /* ===== Keyword Gap loader ===== */
    const GAP_CSV = 'assets/Birme%20keyword%20gap.csv';
    function renderGapTable(rows, limit=1000){
      const thead=document.getElementById('gap-thead'), tbody=document.getElementById('gap-tbody');
      if(!thead||!tbody||!rows||!rows.length) return;
      const cols = Object.keys(rows[0]);
      thead.innerHTML = '<tr>'+cols.map(c=>`<th style="text-align:left;padding:8px;border-bottom:1px solid rgba(255,255,255,.08)">${c}</th>`).join('')+'</tr>';
      tbody.innerHTML = rows.slice(0,limit).map(r=>('<tr>'+cols.map(c=>`<td style="padding:8px;border-bottom:1px solid rgba(255,255,255,.06)">${(r[c]??'')}</td>`).join('')+'</tr>')).join('');
    }
    function loadKeywordGap(){
      if(!document.getElementById('gap-table')) return;
      if(typeof Papa==='undefined'){ console.warn('PapaParse not loaded'); return; }
      Papa.parse(GAP_CSV,{ download:true, header:true, skipEmptyLines:true, complete:(res)=>{ renderGapTable(res.data); }});
    }

    /* ===== Chart helpers ===== */
    Chart.defaults.color = '#d8d8de';
    Chart.defaults.borderColor = 'rgba(255,255,255,.08)';
    function makeChart(id, type, labels, data, colors, opts={}){
      const el=document.getElementById(id); if(!el) return;
      const options={
        responsive:true, maintainAspectRatio:false,
        plugins:{ legend:{ display:(opts.legend!==undefined)?opts.legend:(type!=='bar') }, tooltip:{enabled:true} },
        scales:{}
      };
      if(type!=='pie' && type!=='doughnut'){
        options.scales = { x:{grid:{color:'rgba(255,255,255,.06)'}}, y:{grid:{color:'rgba(255,255,255,.06)'}} };
      }
      new Chart(el.getContext('2d'),{ type, data:{ labels, datasets:[{ label:opts.label||'', data, backgroundColor:colors, borderColor:colors, tension:.32, fill:(type==='line')?false:true, pointRadius:(type==='line')?3:0 }] }, options });
    }

    /* ===== ANALYTICS JSON (edit as needed) ===== */
    const CURRENT_ANALYTICS_FILE = ''; // optional external JSON path

    const ANALYTICS_DEFAULT = {
      period: "Sep 16 – Oct 20, 2025",
      sources: {
        wix: { page_view_users: 7127, app_redirect_users: 5826 },
        app: { login_users: 4851, export_images_users: 3111 }
      },
      campaigns: {
        // Fill these if you want the Campaigns sub-tab tiles to populate automatically
        global: null, // { page_view_users, app_redirect_users, login_users, export_images_users }
        europe: null
      },
      retention: {
        // Fill these (unique users) to enable the Retention tiles
        dau: null, wau: null, mau: null
      }
    };

    let ANALYTICS = structuredClone(ANALYTICS_DEFAULT);
    async function loadAnalyticsJSON(){
      if(!CURRENT_ANALYTICS_FILE) return ANALYTICS;
      try{ const res=await fetch(CURRENT_ANALYTICS_FILE); if(!res.ok) throw 0; ANALYTICS=await res.json(); }
      catch{ ANALYTICS=structuredClone(ANALYTICS_DEFAULT); }
      return ANALYTICS;
    }
    function fmt(n){ return (n??0).toLocaleString(); }
    function pct(x){ return (x*100).toLocaleString(undefined,{maximumFractionDigits:1})+'%'; }

    /* ===== Renderers ===== */
    function renderAnalyticsOverview(){
      const a=ANALYTICS, pv=a.sources.wix.page_view_users||0, ar=a.sources.wix.app_redirect_users||0, lg=a.sources.app.login_users||0, rz=a.sources.app.export_images_users||0;
      const ratios={
        cta: pv? ar/pv : 0,
        r2l: ar? lg/ar : 0,
        l2r: lg? rz/lg : 0,
        p2r: pv? rz/pv : 0
      };

      const tiles=[
        { label:'CTA click-through (Wix → App)', value:pct(ratios.cta), sub:`${fmt(ar)} / ${fmt(pv)} users` },
        { label:'Redirect → Login', value:pct(ratios.r2l), sub:`${fmt(lg)} / ${fmt(ar)} users` },
        { label:'Login → Resize (init.)', value:pct(ratios.l2r), sub:`${fmt(rz)} / ${fmt(lg)} users` },
        { label:'Page → Resize (overall)', value:pct(ratios.p2r), sub:`${fmt(rz)} / ${fmt(pv)} users` },
      ];
      document.getElementById('analytics-tiles').innerHTML = tiles.map(t=>(
        `<div class="tile"><div class="label">${t.label}</div><div class="value">${t.value}</div><div class="sub">${t.sub}</div></div>`
      )).join('');

      makeChart('analytics-ratio-chart','bar',
        ['CTA','Redirect→Login','Login→Resize','Page→Resize'],
        [ratios.cta*100, ratios.r2l*100, ratios.l2r*100, ratios.p2r*100],
        ['#0a84ff','#30d158','#ffd60a','#7a7aff'],
        { legend:false }
      );
    }

    function renderAnalyticsCampaigns(){
      const c=ANALYTICS.campaigns||{}, g=c.global, e=c.europe;
      const mount=document.getElementById('campaign-tiles'); mount.innerHTML='';
      if(!g||!e){
        mount.innerHTML = `<div class="tile" style="grid-column:1/-1"><div class="label">Campaign comparison</div><div class="value">Add counts to campaigns.global & campaigns.europe</div><div class="sub">page_view_users, app_redirect_users, login_users, export_images_users</div></div>`;
        return;
      }
      function r(x){ const pv=x.page_view_users||0, ar=x.app_redirect_users||0, lg=x.login_users||0, rz=x.export_images_users||0; return {cta:pv?ar/pv:0, r2l:ar?lg/ar:0, l2r:lg?rz/lg:0, p2r:pv?rz/pv:0}; }
      const rg=r(g), re=r(e);
      const rows=[{n:'CTA',g:rg.cta,e:re.cta},{n:'Redirect→Login',g:rg.r2l,e:re.r2l},{n:'Login→Resize',g:rg.l2r,e:re.l2r},{n:'Page→Resize',g:rg.p2r,e:re.p2r}];
      mount.innerHTML = rows.map(x=>`<div class="tile"><div class="label">${x.n}</div><div class="value">Global ${pct(x.g)} · Europe ${pct(x.e)}</div></div>`).join('');
      const ctx=document.getElementById('campaign-compare-chart').getContext('2d');
      new Chart(ctx,{type:'bar',data:{labels:rows.map(r=>r.n),datasets:[{label:'Global',data:rows.map(r=>r.g*100),backgroundColor:'#0a84ff'},{label:'Europe',data:rows.map(r=>r.e*100),backgroundColor:'#30d158'}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:true}}});
    }

    function renderRetention(){
      const r=ANALYTICS.retention||{}, dau=r.dau, wau=r.wau, mau=r.mau;
      const tilesMount=document.getElementById('retention-tiles'); tilesMount.innerHTML='';
      if(!(dau&&wau&&mau)){
        tilesMount.innerHTML = `<div class="tile" style="grid-column:1/-1"><div class="label">Stickiness & actives</div><div class="value">Awaiting DAU/WAU/MAU</div><div class="sub">Fill ANALYTICS.retention = { dau, wau, mau }</div></div>`;
        return;
      }
      const s1=dau/mau, s2=wau/mau;
      const tiles=[
        {label:'DAU',value:fmt(dau),sub:'Daily active users'},
        {label:'WAU',value:fmt(wau),sub:'Weekly active users'},
        {label:'MAU',value:fmt(mau),sub:'Monthly active users'},
        {label:'Stickiness (DAU/MAU)',value:pct(s1),sub:'Higher is better'},
      ];
      tilesMount.innerHTML = tiles.map(t=>`<div class="tile"><div class="label">${t.label}</div><div class="value">${t.value}</div><div class="sub">${t.sub}</div></div>`).join('');
      makeChart('stickiness-chart','bar',['DAU/MAU','WAU/MAU'],[s1*100,s2*100],['#0a84ff','#30d158'],{legend:false});
    }

    /* ===== Minimal charts to keep page working */
    makeChart('seoChart','bar',['Meta Titles','Alt Text','Schema','Page Speed'],[8,7,9,6], ['#0a84ff','#30d158','#ffd60a','#ff453a'],{legend:false});
    makeChart('birme-traffic','line',['Feb','Mar','Apr','May','Jun','Jul','Aug'],[13787,14607,13907,14553,13090,19484,15760],['#0a84ff'],{label:'Organic Traffic'});
    makeChart('brp-traffic','line',['Feb','Mar','Apr','May','Jun','Jul','Aug'],[43023,43957,41634,88463,50970,62131,65313],['#0a84ff'],{label:'Organic Traffic'});
    makeChart('simple-traffic','line',['Feb','Mar','Apr','May','Jun','Jul','Aug'],[928513,1055791,1061545,1182587,1168962,1243294,1316999],['#0a84ff'],{label:'Organic Traffic'});

    /* ===== Tab logic ===== */
    document.querySelectorAll('.tab').forEach(tab=>{
      tab.addEventListener('click',()=>{
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');

        if(tab.dataset.tab==='analytics'){
          loadAnalyticsJSON().then(()=>{
            renderAnalyticsOverview();
            renderAnalyticsCampaigns();
            renderRetention();
          });
        }
      });
    });
    document.querySelectorAll('.subtab').forEach(sub=>{
      sub.addEventListener('click',()=>{
        const wrap=sub.closest('.content'); if(!wrap) return;
        wrap.querySelectorAll('.subtab').forEach(s=>s.classList.remove('active'));
        wrap.querySelectorAll('.subcontent').forEach(sc=>sc.classList.remove('active'));
        sub.classList.add('active');
        const target=document.getElementById(sub.dataset.sub); if(target) target.classList.add('active');
        if(sub.dataset.sub==='comp-gap') loadKeywordGap();
      });
    });
  </script>
</body>
</html>
